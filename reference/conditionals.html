<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Applying Subschemas Conditionally &#8212; Understanding JSON Schema 2020-12 documentation</title>
    <link rel="stylesheet" href="../_static/jsonschema.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/jsonschema.js"></script>
    <link rel="shortcut icon" href="../_static/logo.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Declaring a Dialect" href="schema.html" />
    <link rel="prev" title="Schema Composition" href="combining.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.4.1/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99695987-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-99695987-1');
</script>

  </head><body>
  
  <a href="https://github.com/json-schema-org/understanding-json-schema"
     class="visible-desktop"><img
    style="position: absolute; z-index: 10; top: 40px; right: 0; border: 0;"
    src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"
    alt="Fork me on GitHub"></a>


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Understanding JSON Schema</a>
        <span class="navbar-text navbar-version pull-left"><b>2020-12</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Document <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../conventions.html">Conventions used in this book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">What is a schema?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html">The basics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">JSON Schema Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structuring.html">Structuring a complex schema</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Acknowledgments</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="combining.html" title="Previous Chapter: Schema Composition"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Schema Composition</span>
    </a>
  </li>
  <li>
    <a href="schema.html" title="Next Chapter: Declaring a Dialect"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Declaring a Dialect &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="applying-subschemas-conditionally">
<span id="conditionals"></span><span id="index-0"></span><h1>Applying Subschemas Conditionally<a class="headerlink" href="#applying-subschemas-conditionally" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#dependentrequired" id="id4">dependentRequired</a></li>
<li><a class="reference internal" href="#dependentschemas" id="id5">dependentSchemas</a></li>
<li><a class="reference internal" href="#if-then-else" id="id6">If-Then-Else</a></li>
<li><a class="reference internal" href="#implication" id="id7">Implication</a></li>
</ul>
</div>
<div class="section" id="dependentrequired">
<span id="index-1"></span><span id="id1"></span><h2><a class="toc-backref" href="#id4">dependentRequired</a><a class="headerlink" href="#dependentrequired" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">dependentRequired</span></code> keyword conditionally requires that certain
properties must be present if a given property is present in an
object. For example, suppose we have a schema representing a customer.
If you have their credit card number, you also want to ensure you have
a billing address. If you don’t have their credit card number, a
billing address would not be required. We represent this dependency
of one property on another using the <code class="docutils literal notranslate"><span class="pre">dependentRequired</span></code> keyword.
The value of the <code class="docutils literal notranslate"><span class="pre">dependentRequired</span></code> keyword is an object. Each
entry in the object maps from the name of a property, <em>p</em>, to an array
of strings listing properties that are required if <em>p</em> is present.</p>
<p>In the following example, whenever a <code class="docutils literal notranslate"><span class="pre">credit_card</span></code> property is
provided, a <code class="docutils literal notranslate"><span class="pre">billing_address</span></code> property must also be present:</p>
<div class="jsonschema highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>

  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span> <span class="p">},</span>
    <span class="s2">&quot;credit_card&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;number&quot;</span> <span class="p">},</span>
    <span class="s2">&quot;billing_address&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span> <span class="p">}</span>
  <span class="p">},</span>

  <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>

  <span class="s2">&quot;dependentRequired&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;credit_card&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;billing_address&quot;</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
  <span class="s2">&quot;credit_card&quot;</span><span class="o">:</span> <span class="mf">5555555555555555</span><span class="p">,</span>
  <span class="s2">&quot;billing_address&quot;</span><span class="o">:</span> <span class="s2">&quot;555 Debtor&#39;s Lane&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="jsonschema-comment">This instance has a <code class="docutils literal notranslate"><span class="pre">credit_card</span></code>, but it’s missing a <code class="docutils literal notranslate"><span class="pre">billing_address</span></code>.</p>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
  <span class="s2">&quot;credit_card&quot;</span><span class="o">:</span> <span class="mf">5555555555555555</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="jsonschema-comment">This is okay, since we have neither a <code class="docutils literal notranslate"><span class="pre">credit_card</span></code>, or a <code class="docutils literal notranslate"><span class="pre">billing_address</span></code>.</p>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;John Doe&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="jsonschema-comment">Note that dependencies are not bidirectional.  It’s okay to have
a billing address without a credit card number.</p>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
  <span class="s2">&quot;billing_address&quot;</span><span class="o">:</span> <span class="s2">&quot;555 Debtor&#39;s Lane&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To fix the last issue above (that dependencies are not bidirectional),
you can, of course, define the bidirectional dependencies explicitly:</p>
<div class="jsonschema highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>

  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span> <span class="p">},</span>
    <span class="s2">&quot;credit_card&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;number&quot;</span> <span class="p">},</span>
    <span class="s2">&quot;billing_address&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span> <span class="p">}</span>
  <span class="p">},</span>

  <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>

  <span class="s2">&quot;dependentRequired&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;credit_card&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;billing_address&quot;</span><span class="p">],</span>
    <span class="s2">&quot;billing_address&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;credit_card&quot;</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="jsonschema-comment">This instance has a <code class="docutils literal notranslate"><span class="pre">credit_card</span></code>, but it’s missing a <code class="docutils literal notranslate"><span class="pre">billing_address</span></code>.</p>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
  <span class="s2">&quot;credit_card&quot;</span><span class="o">:</span> <span class="mf">5555555555555555</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="jsonschema-comment">This has a <code class="docutils literal notranslate"><span class="pre">billing_address</span></code>, but is missing a <code class="docutils literal notranslate"><span class="pre">credit_card</span></code>.</p>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
  <span class="s2">&quot;billing_address&quot;</span><span class="o">:</span> <span class="s2">&quot;555 Debtor&#39;s Lane&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="tabbable">
<ul class="nav nav-tabs simple">
<li class="disabled"><a class="disabled">Draft-specific info:</a></li>
<li class="active"><a data-toggle="tab" href="#7f2354063710_Draft_4_7">Draft 4-7</a></li>
</ul>
<div class="tab-content section">
<div class="tab-pane active section" id="7f2354063710_Draft_4_7">
Previously to Draft 2019-09, <code class="docutils literal notranslate"><span class="pre">dependentRequired</span></code> and
<code class="docutils literal notranslate"><span class="pre">dependentSchemas</span></code> were one keyword called <code class="docutils literal notranslate"><span class="pre">dependencies</span></code>. If
the dependency value was an array, it would behave like
<code class="docutils literal notranslate"><span class="pre">dependentRequired</span></code> and if the dependency value was a schema, it
would behave like <code class="docutils literal notranslate"><span class="pre">dependentSchemas</span></code>.</div>
</div>
</div></div>
<div class="section" id="dependentschemas">
<span id="index-2"></span><span id="id2"></span><h2><a class="toc-backref" href="#id5">dependentSchemas</a><a class="headerlink" href="#dependentschemas" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">dependentSchemas</span></code> keyword conditionally applies a subschema
when a given property is present. This schema is applied in the same
way <a class="reference internal" href="combining.html#allof"><span class="std std-ref">allOf</span></a> applies schemas. Nothing is merged or extended. Both
schemas apply independently.</p>
<p>For example, here is another way to write the above:</p>
<div class="jsonschema highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>

  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span> <span class="p">},</span>
    <span class="s2">&quot;credit_card&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;number&quot;</span> <span class="p">}</span>
  <span class="p">},</span>

  <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>

  <span class="s2">&quot;dependentSchemas&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;credit_card&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;billing_address&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span> <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;billing_address&quot;</span><span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
  <span class="s2">&quot;credit_card&quot;</span><span class="o">:</span> <span class="mf">5555555555555555</span><span class="p">,</span>
  <span class="s2">&quot;billing_address&quot;</span><span class="o">:</span> <span class="s2">&quot;555 Debtor&#39;s Lane&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="jsonschema-comment">This instance has a <code class="docutils literal notranslate"><span class="pre">credit_card</span></code>, but it’s missing a
<code class="docutils literal notranslate"><span class="pre">billing_address</span></code>:</p>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
  <span class="s2">&quot;credit_card&quot;</span><span class="o">:</span> <span class="mf">5555555555555555</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="jsonschema-comment">This has a <code class="docutils literal notranslate"><span class="pre">billing_address</span></code>, but is missing a
<code class="docutils literal notranslate"><span class="pre">credit_card</span></code>.  This passes, because here <code class="docutils literal notranslate"><span class="pre">billing_address</span></code>
just looks like an additional property:</p>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
  <span class="s2">&quot;billing_address&quot;</span><span class="o">:</span> <span class="s2">&quot;555 Debtor&#39;s Lane&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="tabbable">
<ul class="nav nav-tabs simple">
<li class="disabled"><a class="disabled">Draft-specific info:</a></li>
<li class="active"><a data-toggle="tab" href="#7f235404eed0_Draft_4_7">Draft 4-7</a></li>
</ul>
<div class="tab-content section">
<div class="tab-pane active section" id="7f235404eed0_Draft_4_7">
Previously to Draft 2019-09, <code class="docutils literal notranslate"><span class="pre">dependentRequired</span></code> and
<code class="docutils literal notranslate"><span class="pre">dependentSchemas</span></code> were one keyword called <code class="docutils literal notranslate"><span class="pre">dependencies</span></code>. If
the dependency value was an array, it would behave like
<code class="docutils literal notranslate"><span class="pre">dependentRequired</span></code> and if the dependency value was a schema, it
would behave like <code class="docutils literal notranslate"><span class="pre">dependentSchemas</span></code>.</div>
</div>
</div></div>
<div class="section" id="if-then-else">
<span id="ifthenelse"></span><span id="index-3"></span><h2><a class="toc-backref" href="#id6">If-Then-Else</a><a class="headerlink" href="#if-then-else" title="Permalink to this headline">¶</a></h2>
<p><span class="new">New in draft 7</span> The <code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">then</span></code> and <code class="docutils literal notranslate"><span class="pre">else</span></code> keywords allow the
application of a subschema based on the outcome of another schema,
much like the <code class="docutils literal notranslate"><span class="pre">if</span></code>/<code class="docutils literal notranslate"><span class="pre">then</span></code>/<code class="docutils literal notranslate"><span class="pre">else</span></code> constructs you’ve probably seen
in traditional programming languages.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">if</span></code> is valid, <code class="docutils literal notranslate"><span class="pre">then</span></code> must also be valid (and <code class="docutils literal notranslate"><span class="pre">else</span></code> is ignored.) If
<code class="docutils literal notranslate"><span class="pre">if</span></code> is invalid, <code class="docutils literal notranslate"><span class="pre">else</span></code> must also be valid (and <code class="docutils literal notranslate"><span class="pre">then</span></code> is ignored).</p>
<p>If <code class="docutils literal notranslate"><span class="pre">then</span></code> or <code class="docutils literal notranslate"><span class="pre">else</span></code> is not defined, <code class="docutils literal notranslate"><span class="pre">if</span></code> behaves as if they have a value
of <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">then</span></code> and/or <code class="docutils literal notranslate"><span class="pre">else</span></code> appear in a schema without <code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">then</span></code> and
<code class="docutils literal notranslate"><span class="pre">else</span></code> are ignored.</p>
<p>We can put this in the form of a truth table, showing the combinations of when
<code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">then</span></code>, and <code class="docutils literal notranslate"><span class="pre">else</span></code> are valid and the resulting validity of the
entire schema:</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="17%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">if</th>
<th class="head">then</th>
<th class="head">else</th>
<th class="head">whole schema</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>T</td>
<td>T</td>
<td>n/a</td>
<td>T</td>
</tr>
<tr class="row-odd"><td>T</td>
<td>F</td>
<td>n/a</td>
<td>F</td>
</tr>
<tr class="row-even"><td>F</td>
<td>n/a</td>
<td>T</td>
<td>T</td>
</tr>
<tr class="row-odd"><td>F</td>
<td>n/a</td>
<td>F</td>
<td>F</td>
</tr>
<tr class="row-even"><td>n/a</td>
<td>n/a</td>
<td>n/a</td>
<td>T</td>
</tr>
</tbody>
</table>
<p>For example, let’s say you wanted to write a schema to handle addresses in the
United States and Canada. These countries have different postal code formats,
and we want to select which format to validate against based on the country. If
the address is in the United States, the <code class="docutils literal notranslate"><span class="pre">postal_code</span></code> field is a “zipcode”:
five numeric digits followed by an optional four digit suffix. If the address is
in Canada, the <code class="docutils literal notranslate"><span class="pre">postal_code</span></code> field is a six digit alphanumeric string where
letters and numbers alternate.</p>
<div class="jsonschema highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;street_address&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;default&quot;</span><span class="o">:</span> <span class="s2">&quot;United States of America&quot;</span><span class="p">,</span>
      <span class="s2">&quot;enum&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;United States of America&quot;</span><span class="p">,</span> <span class="s2">&quot;Canada&quot;</span><span class="p">]</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;if&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;const&quot;</span><span class="o">:</span> <span class="s2">&quot;United States of America&quot;</span> <span class="p">}</span> <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;then&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;pattern&quot;</span><span class="o">:</span> <span class="s2">&quot;[0-9]{5}(-[0-9]{4})?&quot;</span> <span class="p">}</span> <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;else&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;pattern&quot;</span><span class="o">:</span> <span class="s2">&quot;[A-Z][0-9][A-Z] [0-9][A-Z][0-9]&quot;</span> <span class="p">}</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;street_address&quot;</span><span class="o">:</span> <span class="s2">&quot;1600 Pennsylvania Avenue NW&quot;</span><span class="p">,</span>
  <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="s2">&quot;United States of America&quot;</span><span class="p">,</span>
  <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="s2">&quot;20500&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;street_address&quot;</span><span class="o">:</span> <span class="s2">&quot;1600 Pennsylvania Avenue NW&quot;</span><span class="p">,</span>
  <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="s2">&quot;20500&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;street_address&quot;</span><span class="o">:</span> <span class="s2">&quot;24 Sussex Drive&quot;</span><span class="p">,</span>
  <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">,</span>
  <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="s2">&quot;K1M 1M4&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;street_address&quot;</span><span class="o">:</span> <span class="s2">&quot;24 Sussex Drive&quot;</span><span class="p">,</span>
  <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">,</span>
  <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="s2">&quot;10000&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;street_address&quot;</span><span class="o">:</span> <span class="s2">&quot;1600 Pennsylvania Avenue NW&quot;</span><span class="p">,</span>
  <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="s2">&quot;K1M 1M4&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In this example, “country” is not a required property. Because the “if”
schema also doesn’t require the “country” property, it will pass and the
“then” schema will apply. Therefore, if the “country” property is not
defined, the default behavior is to validate “postal_code” as a USA postal
code. The “default” keyword doesn’t have an effect, but is nice to include
for readers of the schema to more easily recognize the default behavior.</p>
</div>
<p>Unfortunately, this approach above doesn’t scale to more than two countries. You
can, however, wrap pairs of <code class="docutils literal notranslate"><span class="pre">if</span></code> and <code class="docutils literal notranslate"><span class="pre">then</span></code> inside an <code class="docutils literal notranslate"><span class="pre">allOf</span></code> to create
something that would scale. In this example, we’ll use United States and
Canadian postal codes, but also add Netherlands postal codes, which are 4 digits
followed by two letters. It’s left as an exercise to the reader to expand this
to the remaining postal codes of the world.</p>
<div class="jsonschema highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;street_address&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;default&quot;</span><span class="o">:</span> <span class="s2">&quot;United States of America&quot;</span><span class="p">,</span>
      <span class="s2">&quot;enum&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;United States of America&quot;</span><span class="p">,</span> <span class="s2">&quot;Canada&quot;</span><span class="p">,</span> <span class="s2">&quot;Netherlands&quot;</span><span class="p">]</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;allOf&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;if&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;const&quot;</span><span class="o">:</span> <span class="s2">&quot;United States of America&quot;</span> <span class="p">}</span> <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">&quot;then&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;pattern&quot;</span><span class="o">:</span> <span class="s2">&quot;[0-9]{5}(-[0-9]{4})?&quot;</span> <span class="p">}</span> <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;if&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;const&quot;</span><span class="o">:</span> <span class="s2">&quot;Canada&quot;</span> <span class="p">}</span> <span class="p">},</span>
        <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;country&quot;</span><span class="p">]</span>
      <span class="p">},</span>
      <span class="s2">&quot;then&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;pattern&quot;</span><span class="o">:</span> <span class="s2">&quot;[A-Z][0-9][A-Z] [0-9][A-Z][0-9]&quot;</span> <span class="p">}</span> <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s2">&quot;if&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;const&quot;</span><span class="o">:</span> <span class="s2">&quot;Netherlands&quot;</span> <span class="p">}</span> <span class="p">},</span>
        <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;country&quot;</span><span class="p">]</span>
      <span class="p">},</span>
      <span class="s2">&quot;then&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;pattern&quot;</span><span class="o">:</span> <span class="s2">&quot;[0-9]{4} [A-Z]{2}&quot;</span> <span class="p">}</span> <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;street_address&quot;</span><span class="o">:</span> <span class="s2">&quot;1600 Pennsylvania Avenue NW&quot;</span><span class="p">,</span>
  <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="s2">&quot;United States of America&quot;</span><span class="p">,</span>
  <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="s2">&quot;20500&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;street_address&quot;</span><span class="o">:</span> <span class="s2">&quot;1600 Pennsylvania Avenue NW&quot;</span><span class="p">,</span>
  <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="s2">&quot;20500&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;street_address&quot;</span><span class="o">:</span> <span class="s2">&quot;24 Sussex Drive&quot;</span><span class="p">,</span>
  <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">,</span>
  <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="s2">&quot;K1M 1M4&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;street_address&quot;</span><span class="o">:</span> <span class="s2">&quot;Adriaan Goekooplaan&quot;</span><span class="p">,</span>
  <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="s2">&quot;Netherlands&quot;</span><span class="p">,</span>
  <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="s2">&quot;2517 JX&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;street_address&quot;</span><span class="o">:</span> <span class="s2">&quot;24 Sussex Drive&quot;</span><span class="p">,</span>
  <span class="s2">&quot;country&quot;</span><span class="o">:</span> <span class="s2">&quot;Canada&quot;</span><span class="p">,</span>
  <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="s2">&quot;10000&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;street_address&quot;</span><span class="o">:</span> <span class="s2">&quot;1600 Pennsylvania Avenue NW&quot;</span><span class="p">,</span>
  <span class="s2">&quot;postal_code&quot;</span><span class="o">:</span> <span class="s2">&quot;K1M 1M4&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The “required” keyword is necessary in the “if” schemas or they would all
apply if the “country” is not defined. Leaving “required” off of the
“United States of America” “if” schema makes it effectively the default if
no “country” is defined.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even if “country” was a required field, it’s still recommended to have the
“required” keyword in each “if” schema. The validation result will be the
same because “required” will fail, but not including it will add noise to
error results because it will validate the “postal_code” against all three
of the “then” schemas leading to irrelevant errors.</p>
</div>
</div>
<div class="section" id="implication">
<span id="index-4"></span><span id="id3"></span><h2><a class="toc-backref" href="#id7">Implication</a><a class="headerlink" href="#implication" title="Permalink to this headline">¶</a></h2>
<p>Before Draft 7, you can express an “if-then” conditional using the
<a class="reference internal" href="combining.html#combining"><span class="std std-ref">Schema Composition</span></a> keywords and a boolean algebra concept called
“implication”. <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">B</span></code> (pronounced, A implies B) means that if A is
true, then B must also be true. It can be expressed as <code class="docutils literal notranslate"><span class="pre">!A</span> <span class="pre">||</span> <span class="pre">B</span></code>
which can be expressed as a JSON Schema.</p>
<div class="jsonschema highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;restaurantType&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;enum&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;fast-food&quot;</span><span class="p">,</span> <span class="s2">&quot;sit-down&quot;</span><span class="p">]</span> <span class="p">},</span>
    <span class="s2">&quot;total&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;number&quot;</span> <span class="p">},</span>
    <span class="s2">&quot;tip&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;number&quot;</span> <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;anyOf&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;not&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;restaurantType&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;const&quot;</span><span class="o">:</span> <span class="s2">&quot;sit-down&quot;</span> <span class="p">}</span> <span class="p">},</span>
        <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;restaurantType&quot;</span><span class="p">]</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span> <span class="s2">&quot;required&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;tip&quot;</span><span class="p">]</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;restaurantType&quot;</span><span class="o">:</span> <span class="s2">&quot;sit-down&quot;</span><span class="p">,</span>
  <span class="s2">&quot;total&quot;</span><span class="o">:</span> <span class="mf">16.99</span><span class="p">,</span>
  <span class="s2">&quot;tip&quot;</span><span class="o">:</span> <span class="mf">3.4</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;restaurantType&quot;</span><span class="o">:</span> <span class="s2">&quot;sit-down&quot;</span><span class="p">,</span>
  <span class="s2">&quot;total&quot;</span><span class="o">:</span> <span class="mf">16.99</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;restaurantType&quot;</span><span class="o">:</span> <span class="s2">&quot;fast-food&quot;</span><span class="p">,</span>
  <span class="s2">&quot;total&quot;</span><span class="o">:</span> <span class="mf">6.99</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&quot;total&quot;</span><span class="o">:</span> <span class="mf">5.25</span> <span class="p">}</span>
</pre></div>
</div>
<p>Variations of implication can be used to express the same things you
can express with the <code class="docutils literal notranslate"><span class="pre">if</span></code>/<code class="docutils literal notranslate"><span class="pre">then</span></code>/<code class="docutils literal notranslate"><span class="pre">else</span></code> keywords.
<code class="docutils literal notranslate"><span class="pre">if</span></code>/<code class="docutils literal notranslate"><span class="pre">then</span></code> can be expressed as <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">B</span></code>, <code class="docutils literal notranslate"><span class="pre">if</span></code>/<code class="docutils literal notranslate"><span class="pre">else</span></code> can be
expressed as <code class="docutils literal notranslate"><span class="pre">!A</span> <span class="pre">-&gt;</span> <span class="pre">B</span></code>, and <code class="docutils literal notranslate"><span class="pre">if</span></code>/<code class="docutils literal notranslate"><span class="pre">then</span></code>/<code class="docutils literal notranslate"><span class="pre">else</span></code> can be
expressed as <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">-&gt;</span> <span class="pre">B</span> <span class="pre">AND</span> <span class="pre">!A</span> <span class="pre">-&gt;</span> <span class="pre">C</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since this pattern is not very intuitive, it’s recommended to
put your conditionals in <code class="docutils literal notranslate"><span class="pre">$defs</span></code> with a descriptive name and
<code class="docutils literal notranslate"><span class="pre">$ref</span></code> it into your schema with <code class="docutils literal notranslate"><span class="pre">&quot;allOf&quot;:</span> <span class="pre">[{</span> <span class="pre">&quot;$ref&quot;:</span>
<span class="pre">&quot;#/$defs/sit-down-restaurant-implies-tip-is-required&quot;</span> <span class="pre">}]</span></code>.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013-2016 Michael Droettboom, Space Telescope Science Institute; © 2016-2023 Michael Droettboom.<br/>
      Last updated on Jan 11, 2023.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>