<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Schema Composition &#8212; Understanding JSON Schema 2020-12 documentation</title>
    <link rel="stylesheet" href="../_static/jsonschema.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/jsonschema.js"></script>
    <link rel="shortcut icon" href="../_static/logo.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Applying Subschemas Conditionally" href="conditionals.html" />
    <link rel="prev" title="Media: string-encoding non-JSON data" href="non_json_data.html" />

<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.4.1/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-99695987-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-99695987-1');
</script>

  </head><body>
  
  <a href="https://github.com/json-schema-org/understanding-json-schema"
     class="visible-desktop"><img
    style="position: absolute; z-index: 10; top: 40px; right: 0; border: 0;"
    src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"
    alt="Fork me on GitHub"></a>


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Understanding JSON Schema</a>
        <span class="navbar-text navbar-version pull-left"><b>2020-12</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Document <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../conventions.html">Conventions used in this book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">What is a schema?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics.html">The basics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">JSON Schema Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structuring.html">Structuring a complex schema</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Acknowledgments</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="non_json_data.html" title="Previous Chapter: Media: string-encoding non-JSON data"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Media: string...</span>
    </a>
  </li>
  <li>
    <a href="conditionals.html" title="Next Chapter: Applying Subschemas Conditionally"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Applying Subs... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="schema-composition">
<span id="combining"></span><span id="index-0"></span><h1>Schema Composition<a class="headerlink" href="#schema-composition" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#allof" id="id5">allOf</a></li>
<li><a class="reference internal" href="#anyof" id="id6">anyOf</a></li>
<li><a class="reference internal" href="#oneof" id="id7">oneOf</a></li>
<li><a class="reference internal" href="#not" id="id8">not</a></li>
<li><a class="reference internal" href="#properties-of-schema-composition" id="id9">Properties of Schema Composition</a><ul>
<li><a class="reference internal" href="#illogical-schemas" id="id10">Illogical Schemas</a></li>
<li><a class="reference internal" href="#factoring-schemas" id="id11">Factoring Schemas</a></li>
</ul>
</li>
</ul>
</div>
<p>JSON Schema includes a few keywords for combining schemas together.
Note that this doesn’t necessarily mean combining schemas from
multiple files or JSON trees, though these facilities help to enable
that and are described in <a class="reference internal" href="../structuring.html#structuring"><span class="std std-ref">Structuring a complex schema</span></a>.  Combining schemas may be as
simple as allowing a value to be validated against multiple criteria
at the same time.</p>
<p>These keywords correspond to well known boolean algebra concepts like
AND, OR, XOR, and NOT. You can often use these keywords to express
complex constraints that can’t otherwise be expressed with standard
JSON Schema keywords.</p>
<p>The keywords used to combine schemas are:</p>
<ul class="simple">
<li><a class="reference internal" href="#allof"><span class="std std-ref">allOf</span></a>: (AND) Must be valid against <em>all</em> of the subschemas</li>
<li><a class="reference internal" href="#anyof"><span class="std std-ref">anyOf</span></a>: (OR) Must be valid against <em>any</em> of the subschemas</li>
<li><a class="reference internal" href="#oneof"><span class="std std-ref">oneOf</span></a>: (XOR) Must be valid against <em>exactly one</em> of the subschemas</li>
</ul>
<p>All of these keywords must be set to an array, where each item is a
schema.</p>
<p>In addition, there is:</p>
<ul class="simple">
<li><a class="reference internal" href="#not"><span class="std std-ref">not</span></a>: (NOT) Must <em>not</em> be valid against the given schema</li>
</ul>
<div class="section" id="allof">
<span id="index-1"></span><span id="id1"></span><h2><a class="toc-backref" href="#id5">allOf</a><a class="headerlink" href="#allof" title="Permalink to this headline">¶</a></h2>
<p>To validate against <code class="docutils literal notranslate"><span class="pre">allOf</span></code>, the given data must be valid against all
of the given subschemas.</p>
<div class="jsonschema highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;allOf&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s2">&quot;maxLength&quot;</span><span class="o">:</span> <span class="mf">5</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;short&quot;</span>
</pre></div>
</div>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;too long&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#allof"><span class="std std-ref">allOf</span></a> can not be used to “extend” a schema to add more details to
it in the sense of object-oriented inheritance. Instances must
independently be valid against “all of” the schemas in the
<code class="docutils literal notranslate"><span class="pre">allOf</span></code>. See the section on <a class="reference internal" href="object.html#extending"><span class="std std-ref">Extending Closed Schemas</span></a> for more
information.</p>
</div>
</div>
<div class="section" id="anyof">
<span id="index-2"></span><span id="id2"></span><h2><a class="toc-backref" href="#id6">anyOf</a><a class="headerlink" href="#anyof" title="Permalink to this headline">¶</a></h2>
<p>To validate against <code class="docutils literal notranslate"><span class="pre">anyOf</span></code>, the given data must be valid against any
(one or more) of the given subschemas.</p>
<div class="jsonschema highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;anyOf&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;maxLength&quot;</span><span class="o">:</span> <span class="mf">5</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="o">:</span> <span class="mf">0</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;short&quot;</span>
</pre></div>
</div>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;too long&quot;</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="mf">12</span>
</pre></div>
</div>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="mf">5</span>
</pre></div>
</div>
</div>
<div class="section" id="oneof">
<span id="index-3"></span><span id="id3"></span><h2><a class="toc-backref" href="#id7">oneOf</a><a class="headerlink" href="#oneof" title="Permalink to this headline">¶</a></h2>
<p>To validate against <code class="docutils literal notranslate"><span class="pre">oneOf</span></code>, the given data must be valid against
exactly one of the given subschemas.</p>
<div class="jsonschema highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;oneOf&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;multipleOf&quot;</span><span class="o">:</span> <span class="mf">5</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;multipleOf&quot;</span><span class="o">:</span> <span class="mf">3</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="mf">10</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="mf">9</span>
</pre></div>
</div>
<p class="jsonschema-comment">Not a multiple of either 5 or 3.</p>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="mf">2</span>
</pre></div>
</div>
<p class="jsonschema-comment">Multiple of <em>both</em> 5 and 3 is rejected.</p>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="mf">15</span>
</pre></div>
</div>
</div>
<div class="section" id="not">
<span id="index-4"></span><span id="id4"></span><h2><a class="toc-backref" href="#id8">not</a><a class="headerlink" href="#not" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">not</span></code> keyword declares that an instance validates if it doesn’t
validate against the given subschema.</p>
<p>For example, the following schema validates against anything that is
not a string:</p>
<div class="jsonschema highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&quot;not&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="mf">42</span>
</pre></div>
</div>
<div class="jsonschema-pass highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;value&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;I am a string&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="properties-of-schema-composition">
<span id="composition"></span><span id="index-5"></span><h2><a class="toc-backref" href="#id9">Properties of Schema Composition</a><a class="headerlink" href="#properties-of-schema-composition" title="Permalink to this headline">¶</a></h2>
<div class="section" id="illogical-schemas">
<span id="illogicalschemas"></span><h3><a class="toc-backref" href="#id10">Illogical Schemas</a><a class="headerlink" href="#illogical-schemas" title="Permalink to this headline">¶</a></h3>
<p>Note that it’s quite easy to create schemas that are logical
impossibilities with these keywords. The following example creates a
schema that won’t validate against anything (since something may not
be both a string and a number at the same time):</p>
<div class="jsonschema highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;allOf&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;number&quot;</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;No way&quot;</span>
</pre></div>
</div>
<div class="jsonschema-fail highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="mf">1</span>
</pre></div>
</div>
</div>
<div class="section" id="factoring-schemas">
<span id="factoringschemas"></span><h3><a class="toc-backref" href="#id11">Factoring Schemas</a><a class="headerlink" href="#factoring-schemas" title="Permalink to this headline">¶</a></h3>
<p>Note that it’s possible to “factor” out the common parts of the
subschemas.  The following two schemas are equivalent.</p>
<div class="jsonschema highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;oneOf&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;multipleOf&quot;</span><span class="o">:</span> <span class="mf">5</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;multipleOf&quot;</span><span class="o">:</span> <span class="mf">3</span> <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="jsonschema highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
   <span class="s2">&quot;oneOf&quot;</span><span class="o">:</span> <span class="p">[</span>
     <span class="p">{</span> <span class="s2">&quot;multipleOf&quot;</span><span class="o">:</span> <span class="mf">5</span> <span class="p">},</span>
     <span class="p">{</span> <span class="s2">&quot;multipleOf&quot;</span><span class="o">:</span> <span class="mf">3</span> <span class="p">}</span>
   <span class="p">]</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013-2016 Michael Droettboom, Space Telescope Science Institute; © 2016-2023 Michael Droettboom.<br/>
      Last updated on Jan 11, 2023.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>